#include "updateAddHTLC_m.h"
#include "updateFulfillHTLC_m.h"
#include "updateFailHTLC_m.h"

class HTLC {

public:
    std::string _type = "";
    std::string _source = "";
    std::string _paymentHash = "";
    std::string _preImage = "";
    std::string _errorReason = "";
    double _value = 0;

    virtual std::string getType() { return _type; };
    virtual void setType(std::string type) { _type = type; };
    virtual std::string getSource() { return _source; };
    virtual void setSource(std::string source) { _source = source; };
    virtual std::string getPaymentHash() { return _paymentHash; };
    virtual void setPaymentHash(std::string paymentHash) { _paymentHash = paymentHash; };
    virtual std::string getPreImage() { return _preImage; };
    virtual void setPreImage(std::string preImage) { _preImage = preImage; };
    virtual std::string getErrorReason() { return _errorReason; };
    virtual void setErrorReason(std::string errorReason) { _errorReason = errorReason; };
    virtual double getValue() { return _value; };
    virtual void setValue(double value) { _value = value; };


    HTLC(UpdateAddHTLC *htlc);
    HTLC(UpdateFulfillHTLC *htlc);
    HTLC(UpdateFailHTLC *htlc);
};

HTLC::HTLC(UpdateAddHTLC *htlc) {
    _type = "UPDATE_ADD_HTLC";
    _source = htlc->getSource();
    _paymentHash = htlc->getPaymentHash();
    _value = htlc->getValue();
}

HTLC::HTLC(UpdateFulfillHTLC *htlc) {
    _type = "UPDATE_FULFILL_HTLC";
    _paymentHash = htlc->getPaymentHash();
    _preImage = htlc->getPreImage();
}

HTLC::HTLC(UpdateFailHTLC *htlc) {
    _type = "UPDATE_FAIL_HTLC";
    _paymentHash = htlc->getPaymentHash();
    _errorReason = htlc->getErrorReason();
}
